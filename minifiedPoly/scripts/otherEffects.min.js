function generateCubicPoly(e,a,r){var n=.5;for(a&&(n=a),r||(allVertices=[]),allVertices.push([0,0]),allVertices.push([cWidth,0]),allVertices.push([0,cHeight]),allVertices.push([cWidth,cHeight]),i=0;i<cWidth/80;i++){var s=80*i+round(random(0,2))*e,o=80*i+round(random(0,2))*e;inCanvas(s,cHeight)&&allVertices.push([s,cHeight]),inCanvas(o,0)&&allVertices.push([o,0])}for(i=0;i<cHeight/80;i++){s=80*i+round(random(0,2))*e,o=80*i+round(random(0,2))*e;inCanvas(cWidth,s)&&allVertices.push([cWidth,s]),inCanvas(0,o)&&allVertices.push([0,o])}flowing=!1,image(img1,0,0,cWidth,cHeight),loadPixels(),splitSquare(e),scanSquareLR(e,1e8),image(img1,0,0,cWidth,cHeight),loadPixels(),scanSquareUD(e,1e8),generateRandomSquares(e,n),flowing=!0,triangulize(),finishedColoring=!1,image(img1,0,0,cWidth,cHeight),loadPixels(),tColors=[],sTime=millis(),css_buttons.displayPoints(!1),displayPoints=!1}function splitSquare(i){colorOfSquares=[],image(img1,0,0,cWidth,cHeight),loadPixels();var e=cHeight/i,a=cWidth/i;for(ik=0;ik<e;ik++)for(jk=0;jk<a;jk++){var r=averageColorSquare(jk*i,ik*i,i,i,1);r.push(jk*i,ik*i),colorOfSquares.push(r)}}function averageColorSquare(e,a,r,n,s){e+n>cWidth&&(n=cWidth-e),a+r>cHeight&&(r=cHeight-a);var o=0,t=0,c=0,l=0;for(i=0;i<r;i+=s)for(j=0;j<n;j+=s){var u=fget(e+j,a+i);o+=u[0],t+=u[1],c+=u[2],l+=1}return[o/l,t/l,c/l]}function scanSquareLR(i,e,a){var r=800;for(a&&(r=a),k=0;k<colorOfSquares.length-1;k++){var n=colorOfSquares[k],s=colorOfSquares[k+1],o=n[0]-s[0],t=n[1]-s[1],c=n[2]-s[2];if(o*o+t*t+c*c>e||o*o>r||t*t>r||c*c>r)if(1==flowing){var l=round(random(-10,10)),u=round(random(-10,10));inCanvas(n[3]+l+i,n[4]+u)&&allVertices.push([n[3]+l+i/2,n[4]+u])}else inCanvas(n[3]+i/2,n[4])&&allVertices.push([n[3]+i/2,n[4]])}generateHashSpace()}function scanSquareUD(i,e,a){var r=800;for(a&&(r=a),k=0;k<colorOfSquares.length-ceil(cWidth/i);k++){var n=colorOfSquares[k],s=colorOfSquares[k+ceil(cWidth/i)],o=n[0]-s[0],t=n[1]-s[1],c=n[2]-s[2];if(o*o+t*t+c*c>e||o*o>r||t*t>r||c*c>r)if(1==flowing){var l=round(random(-10,10)),u=round(random(-10,10));inCanvas(n[3]+l,n[4]+u+i/2)&&allVertices.push([n[3]+l,n[4]+u+i/2])}else inCanvas(n[3],n[4]+i/2)&&allVertices.push([n[3],n[4]+i/2])}generateHashSpace()}function generateRandomSquares(i,e){for(k=0;k<colorOfSquares.length;k++){var a=colorOfSquares[k];if(random(0,1)<=e)if(1==flowing){var r=round(random(-10,10)),n=round(random(-10,10));inCanvas(a[3]+r,a[4]+n)&&allVertices.push([a[3]+r,a[4]+n])}else inCanvas(a[3]+i/2,a[4])&&allVertices.push([a[3]+i/2,a[4]])}generateHashSpace()}function scanUD(e,a,r){for(j=0;j<cWidth-r;j+=r)for(i=0;i<cHeight-r;i+=r){var n=fget(i,j),s=fget(i,j+r/2),o=n[0]-s[0],t=n[1]-s[1],c=n[2]-s[2],l=n[3]-s[3];if((o*o+t*t+c*c+l*l>a||abs(o)>10||abs(t)>10||abs(c)>10)&&(allVertices.push([i,j]),1==flowing))for(ij=0;ij<2;ij++){var u=round(random(-10,10)),h=round(random(-10,10));i+u>cWidth-1||i+u<1||j+h>cHeight-1||j+h<1||allVertices.push([i+u,j+h])}}}function scanLR(e,a,r){for(j=0;j<cHeight-r;j+=r)for(i=0;i<cWidth-r;i+=r){var n=fget(i,j),s=fget(i+r/2,j),o=n[0]-s[0],t=n[1]-s[1],c=n[2]-s[2],l=n[3]-s[3];if((o*o+t*t+c*c+l*l>a||abs(o)>100||abs(t)>100||abs(c)>100)&&(allVertices.push([i,j]),1==flowing))for(ij=0;ij<2;ij++){var u=round(random(-10,10)),h=round(random(-10,10));i+u>cWidth-1||i+u<1||j+h>cHeight-1||j+h<1||allVertices.push([i+u,j+h])}}generateHashSpace()}function autoGenPoints(i,e){pDensity=.1,e&&(pDensity=e),splitSquare(i),scanSquareLR(i,1e8),scanSquareUD(i,1e8),generateRandomSquares(i,pDensity)}